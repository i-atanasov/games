var canvas=document.getElementById("myCanvas"),ctx=canvas.getContext("2d"),buttonRight=!1,buttonLeft=!1,position=document.getElementById("positions"),score=0,totalScore=0,currentLevel=0;const level={0:[1,1,1,1,1,1,1,1,1,1,1,1],1:[1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1],2:[1,1,1,1,1,1,0,1,1,1,1,0,0,0,1,1,0,0],3:[0,1,1,0,1,1,1,0,1,1,0,1,1,1,0,1,1,0,1,1,1,0,1,1]},ball={x:canvas.width/2,y:canvas.height-35,dx:5,dy:-5,radius:5,speed:5},paddle={height:10,width:80,pos:(canvas.width-80)/2},brick={rows:3,cols:6,width:80,height:15,padding:20};var bricks=[];console.log(level[currentLevel].length);for(var i=1;i<=brick.cols;i++){bricks[i]=[];for(var j=1;j<=level[currentLevel].length/brick.cols;j++)bricks[i][j]={x:0,y:0,hit:!1}}function keyDownHandler(l){"39"==l.keyCode?buttonRight=!0:"37"==l.keyCode&&(buttonLeft=!0)}function keyUpHandler(l){"39"==l.keyCode?buttonRight=!1:"37"==l.keyCode&&(buttonLeft=!1)}function hitBricks(){for(var l=1;l<=brick.cols;l++)for(var e=1;e<=level[currentLevel].length/brick.cols;e++){var t=bricks[l][e];0==t.hit&&ball.x+5>t.x&&ball.x-5<t.x+brick.width&&ball.y+5>t.y&&ball.y-5<t.y+brick.height&&(ball.dy=-ball.dy,t.hit=!0,++score==level[currentLevel].length&&(console.log(score),totalScore+=score,score=0,currentLevel++,alert(`You win! Score: ${totalScore}. Click OK for next level`),document.location.reload()))}}function drawPaddle(){ctx.beginPath(),ctx.rect(paddle.pos,canvas.height-paddle.height-10,paddle.width,paddle.height),ctx.fillStyle="darkolivegreen",ctx.fill(),ctx.strokeStyle="rgba(0, 0, 0, 1)",ctx.stroke(),ctx.closePath()}function drawBall(){ctx.beginPath(),ctx.arc(ball.x,ball.y,ball.radius,0,2*Math.PI),ctx.fillStyle="rgba(133, 55, 55, 0.8)",ctx.fill(),ctx.strokeStyle="rgba(0, 0, 0, 1)",ctx.stroke(),ctx.closePath()}function drawBricks(){for(var l=1;l<=brick.cols;l++)for(var e=1;e<=level[currentLevel].length/brick.cols;e++)if(0==bricks[l][e].hit){var t=l*(brick.width+brick.padding)-brick.width+40,a=e*(brick.height+brick.padding)-brick.height+30;bricks[l][e].x=t,bricks[l][e].y=a,ctx.beginPath(),ctx.rect(t,a,brick.width,brick.height),ctx.fillStyle="rgb(30, 100, 30)",ctx.fill(),ctx.closePath()}}function motion(){ctx.clearRect(0,0,canvas.width,canvas.height),drawBall(),drawPaddle(),drawBricks(),hitBricks(),position.innerHTML="score: "+score,(ball.x+ball.dx>canvas.width-ball.radius||ball.x+ball.dx<ball.radius)&&(ball.dx*=-1),ball.y+ball.dy<ball.radius?ball.dy*=-1:ball.y+ball.dy>canvas.height-ball.radius-20&&(ball.x>paddle.pos-5&&ball.x<paddle.pos+paddle.width+5?(ball.dy*=-1,ball.dy-=.1,ball.dx+=.05):ball.y>canvas.height-30&&document.location.reload()),buttonRight?(paddle.pos+=8,paddle.pos+paddle.width>canvas.width&&(paddle.pos=canvas.width-paddle.width)):buttonLeft&&(paddle.pos-=8,paddle.pos<0&&(paddle.pos=0)),ball.x+=ball.dx,ball.y+=ball.dy,requestAnimationFrame(motion)}document.addEventListener("keydown",keyDownHandler,!1),document.addEventListener("keyup",keyUpHandler,!1),motion();